try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6121f13b-c1b2-4f16-8ce3-0985eeabd412",e._sentryDebugIdIdentifier="sentry-dbid-6121f13b-c1b2-4f16-8ce3-0985eeabd412")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9640],{2486:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var n=s(55864),o=s(55685),r=s(8749),l=s(64660),a=s(6029),i=(0,r.R)(function(e,t){let{status:s}=(0,n.P$)(),r=(0,n.jw)();return(0,a.jsx)(l.B.h3,{ref:t,"data-status":s,...e,__css:r.title,className:(0,o.cx)("chakra-step__title",e.className)})})},18143:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});var n=s(6029),o=s(44444),r=s(49942),l=s(4227);let a=e=>{let{plan:t,...s}=e;return(0,n.jsx)(r.vw,{colorScheme:t?l.r[t]:"gray","data-testid":"".concat(null==t?void 0:t.toLowerCase(),"-lock-tag"),...s,children:(0,n.jsx)(o.c2,{})})}},23996:(e,t,s)=>{"use strict";s.d(t,{x:()=>l});var n=s(55864),o=s(55685),r=s(6029);function l(e){let{complete:t,incomplete:s,active:l}=e,a=(0,n.P$)(),i=null;switch(a.status){case"complete":i=(0,o.Jg)(t,a);break;case"incomplete":i=(0,o.Jg)(s,a);break;case"active":i=(0,o.Jg)(l,a)}return i?(0,r.jsx)(r.Fragment,{children:i}):null}},32796:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var n=s(55729);function o(e={}){let{index:t=0,count:s}=e,[r,l]=(0,n.useState)(t);return{activeStep:r,setActiveStep:l,activeStepPercent:r/("number"==typeof s?s-1:0),isActiveStep:e=>e===r,isCompleteStep:e=>e<r,isIncompleteStep:e=>e>r,getStatus:e=>e<r?"complete":e>r?"incomplete":"active",goToNext(){l(e=>"number"==typeof s?Math.min(s,e+1):e+1)},goToPrevious(){l(e=>Math.max(0,e-1))}}}},38518:(e,t,s)=>{"use strict";s.d(t,{OD:()=>y,cH:()=>j,dd:()=>b,eh:()=>u,ix:()=>m,tI:()=>p,t_:()=>x,v:()=>h,wA:()=>g});var n=s(77420),o=s(10548),r=s(2283),l=s(11855),a=s.n(l),i=s(21750),c=s.n(i),d=s(58795);let u=(e,t,s)=>!t||(0,r.O9)(s)&&t===s?"":"".concat(e,': "').concat(t,'",'),p=(e,t)=>(0,r.O9)(t)?"".concat(e,": ").concat(t,","):"",x=e=>{let{typebot:t,customDomain:s}=e,n=u("typebot",t),o=u("apiHost",f(s)),r=u("wsHost",v());return"".concat(n).concat(o).concat(r)},h=(e,t)=>t?"".concat(e,'="').concat(t,'"'):"",j=(e,t)=>(0,r.O9)(t)?"".concat(e,"={").concat(t,"}"):"",b=e=>{let{typebot:t,customDomain:s}=e,n=h("typebot",t),o=h("apiHost",g(s)),r=h("wsHost",v());return"".concat(n," ").concat(o," ").concat(r)},y="import Typebot from 'https://cdn.jsdelivr.net/npm/@typebot.io/js@".concat(d.rE.split(".")[0],"/dist/web.js'"),m=e=>c().format('const typebotInitScript = document.createElement("script");\n  typebotInitScript.type = "module";\n  typebotInitScript.innerHTML = `'.concat(e,"`;\n  document.body.append(typebotInitScript);"),{parser:"babel",plugins:[a()]}),g=e=>{var t;return e?new URL("https://".concat(e)).origin:null!=(t=o._.NEXT_PUBLIC_VIEWER_URL.at(1))?t:o._.NEXT_PUBLIC_VIEWER_URL[0]},f=e=>{if(!(0,n.I)())return g(e)},v=()=>{if(!(0,n.I)())return o._.NEXT_PUBLIC_PARTYKIT_HOST}},45181:(e,t,s)=>{"use strict";s.d(t,{C:()=>c});var n=s(8749),o=s(20462),r=s(96529),l=s(64660),a=s(55685),i=s(6029),c=(0,n.R)(function(e,t){let s=(0,o.Vl)("Code",e),{className:n,...c}=(0,r.MN)(e);return(0,i.jsx)(l.B.code,{ref:t,className:(0,a.cx)("chakra-code",e.className),...c,__css:{display:"inline-block",...s}})});c.displayName="Code"},55864:(e,t,s)=>{"use strict";s.d(t,{P$:()=>l,V$:()=>r,jf:()=>a,jw:()=>i});var n=s(57987),o=s(41022),[r,l]=(0,n.q)({name:"StepContext"}),[a,i]=(0,o.Wh)("Stepper")},58795:e=>{"use strict";e.exports={rE:"0.8.15"}},60212:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tx});var n=s(6029),o=s(98965),r=s(84111),l=s(35098),a=s(97894),i=s(44444),c=s(90170),d=s(90869),u=s(81208),p=s(49377),x=s(58972),h=s(76685),j=s(71895),b=s(77123);let y=e=>{let{type:t}=e,{user:s,updateUser:o}=(0,c.J)(),{isOpen:r,onClose:l}=(0,j.s)({key:t,user:s,updateUser:o,defaultOpenDelay:1e3,blockDef:void 0}),a=(0,d.dU)("white","gray.950"),y=(0,d.dU)("blackAlpha","gray");return h.Q[t]?(0,n.jsx)(u.s,{in:r,offsetY:"20px",style:{position:"fixed",bottom:"18px",right:"18px",zIndex:42},unmountOnExit:!0,children:(0,n.jsxs)(p.s,{p:"5",bgColor:a,borderWidth:"1px",shadow:"xl",rounded:"md",aspectRatio:"1.5",w:"600px",children:[(0,n.jsx)(b.A,{id:h.Q[t].youtubeId}),(0,n.jsx)(x.K,{icon:(0,n.jsx)(i.US,{}),"aria-label":"Close",pos:"absolute",top:"-3",right:"-3",colorScheme:y,size:"sm",rounded:"full",onClick:l})]})}):null};var m=s(44605),g=s(76308),f=s(9541),v=s(28144),w=s(22070),C=s(75846),k=s(90944),S=s(12225),_=s(55729),I=s(48874),E=s(98269),B=s(71426);let R=[{name:"Web",icon:(0,n.jsx)(i.fC,{})},{name:"WhatsApp",icon:(0,n.jsx)(B.k,{})},{name:"API",icon:(0,n.jsx)(i.lo,{})}];var O=s(37191),L=s(28562),z=s(4368),N=s(38518),T=s(29328),D=s(49891),M=s(94283),A=s(45181);let P=e=>{let{typebot:t}=(0,E.V)(),{startPreviewFrom:s}=(0,z.h)(),o=(null==s?void 0:s.type)==="group"?'{\n  "startGroupId": "'.concat(s.id,'"\n}'):(null==s?void 0:s.type)==="event"?'{\n  "startEventId": "'.concat(s.id,'"\n}'):void 0;return(0,n.jsxs)(T.B,{spacing:10,overflowY:"auto",w:"full",...e,children:[(0,n.jsxs)(D._J,{spacing:6,px:"1",children:[(0,n.jsxs)(D.ck,{children:["All your requests need to be authenticated with an API token."," ",(0,n.jsx)(O.Y,{href:"https://docs.typebot.io/api-reference/authentication",children:"See instructions"}),"."]}),(0,n.jsx)(D.ck,{children:(0,n.jsxs)(T.B,{children:[(0,n.jsxs)(M.E,{children:["To start the chat, send a ",(0,n.jsx)(A.C,{children:"POST"})," request to"]}),(0,n.jsx)(L.B,{isReadOnly:!0,lang:"shell",value:"".concat((0,N.wA)(null==t?void 0:t.customDomain),"/api/v1/typebots/").concat(null==t?void 0:t.id,"/preview/startChat")}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.E,{children:"with the following JSON body:"}),(0,n.jsx)(L.B,{isReadOnly:!0,lang:"json",value:o})]})]})}),(0,n.jsxs)(D.ck,{children:["The first response will contain a ",(0,n.jsx)(A.C,{children:"sessionId"})," that you will need for subsequent requests."]}),(0,n.jsx)(D.ck,{children:(0,n.jsxs)(T.B,{children:[(0,n.jsxs)(M.E,{children:["To send replies, send ",(0,n.jsx)(A.C,{children:"POST"})," requests to"]}),(0,n.jsx)(L.B,{isReadOnly:!0,lang:"shell",value:"".concat((0,N.wA)(null==t?void 0:t.customDomain),"/api/v1/sessions/<ID_FROM_FIRST_RESPONSE>/continueChat")}),(0,n.jsx)(M.E,{children:"With the following JSON body:"}),(0,n.jsx)(L.B,{isReadOnly:!0,lang:"json",value:'{\n  "message": "This is my reply"\n}'}),(0,n.jsxs)(M.E,{children:["Replace ",(0,n.jsx)(A.C,{children:"<ID_FROM_FIRST_RESPONSE>"})," with"," ",(0,n.jsx)(A.C,{children:"sessionId"}),"."]})]})})]}),(0,n.jsxs)(M.E,{fontSize:"sm",pl:"1",children:["Check out the"," ",(0,n.jsx)(O.Y,{href:"https://docs.typebot.io/api-reference/chat/start-preview-chat",isExternal:!0,children:"API reference"})," ","for more information"]})]})};var U=s(20873),W=s(13775),X=s(25093);let V=()=>{var e,t,s,o;let{user:r}=(0,c.J)(),{typebot:l}=(0,E.V)(),{startPreviewFrom:i}=(0,z.h)(),{setPreviewingBlock:d}=(0,a.u)();return l?(0,n.jsx)(W.am,{typebot:l,sessionId:r?"".concat(l.id,"-").concat(r.id):void 0,startFrom:(null==i?void 0:i.type)==="group"?{type:"group",groupId:i.id}:(null==i?void 0:i.type)==="event"?{type:"event",eventId:i.id}:void 0,onNewInputBlock:e=>{var t,s;return d({id:e.id,groupId:null!=(s=null==(t=l.groups.find(t=>t.blocks.some(t=>t.id===e.id)))?void 0:t.id)?s:""})},onNewLogs:e=>{null==e||e.forEach(e=>{(0,U.o)({context:e.context,status:e.status,description:e.description,details:e.details}),"error"===e.status&&console.error(e)})},style:{borderWidth:"1px",borderRadius:"0.25rem",backgroundColor:null!=(s=null==(t=l.theme.general)||null==(e=t.background)?void 0:e.content)?s:X.lG[l.version]}},"web-preview".concat(null!=(o=null==i?void 0:i.id)?o:"")):null};var F=s(22194),Y=s(59309),$=s(88131),G=s(38859),K=s(70205),J=s(16932),H=s(2283);let q="whatsapp-phone",Q=()=>localStorage.getItem(q),Z=e=>{localStorage.setItem(q,e)},ee=e=>{var t;let{typebot:s,save:o}=(0,E.V)(),{startPreviewFrom:r}=(0,z.h)(),[l,a]=(0,_.useState)(null!=(t=Q())?t:""),[c,d]=(0,_.useState)(!1),[p,x]=(0,_.useState)(!1),[h,j]=(0,_.useState)(!1),{mutate:b}=(0,J.n)(Y.id.whatsApp.startWhatsAppPreview.mutationOptions({onMutate:()=>d(!0),onSettled:()=>d(!1),onError:e=>{var t;if(null==(t=e.data)?void 0:t.logError)return(0,U.o)(e.data.logError);(0,U.o)({description:e.message})},onSuccess:async e=>{(null==e?void 0:e.message)==="success"&&l!==Q()&&Z(l),j(!0),x(!0),setTimeout(()=>x(!1),3e4)}})),y=async e=>{e.preventDefault(),s&&(await o(),b({to:l,typebotId:s.id,startFrom:(null==r?void 0:r.type)==="group"?{type:"group",groupId:r.id}:(null==r?void 0:r.type)==="event"?{type:"event",eventId:r.id}:void 0}))};return(0,n.jsxs)(T.B,{as:"form",spacing:4,overflowY:"auto",w:"full",px:"1",onSubmit:y,...e,children:[(0,n.jsxs)(v.z,{justifyContent:"flex-end",children:[(0,n.jsx)(M.E,{fontSize:"sm",children:"Need help?"}),(0,n.jsx)(w.$,{as:$.N,href:"https://docs.typebot.io/deploy/whatsapp/overview",leftIcon:(0,n.jsx)(i.Xb,{}),size:"sm",children:"Check the docs"})]}),(0,n.jsx)(F.ks,{label:"Your phone number",placeholder:"+XXXXXXXXXXXX",type:"tel",withVariableButton:!1,debounceTimeout:0,defaultValue:l,onChange:a}),!p&&(0,n.jsxs)(w.$,{isDisabled:(0,H.Im)(l)||p,isLoading:c,type:"submit",colorScheme:"orange",children:[h?"Restart":"Start"," the chat"]}),(0,n.jsx)(u.s,{offsetY:"20px",in:p,unmountOnExit:!0,children:(0,n.jsxs)(T.B,{children:[(0,n.jsx)(w.$,{as:$.N,href:"https://web.whatsapp.com/",isExternal:!0,colorScheme:"orange",rightIcon:(0,n.jsx)(i.pT,{}),children:"Open WhatsApp Web"}),(0,n.jsx)(G.F,{status:"success",w:"100%",children:(0,n.jsxs)(v.z,{children:[(0,n.jsx)(K._,{}),(0,n.jsxs)(T.B,{spacing:1,children:[(0,n.jsx)(M.E,{fontWeight:"medium",children:"Chat started!"}),(0,n.jsx)(M.E,{fontSize:"sm",children:"The first message can take up to 2 min to be delivered."})]})]})})]})})]})},et=e=>{let{runtime:t}=e;switch(t){case"Web":return(0,n.jsx)(V,{});case"WhatsApp":return(0,n.jsx)(ee,{});case"API":return(0,n.jsx)(P,{pt:"4"})}};var es=s(66425);let en=e=>(0,n.jsxs)(p.s,{w:"15px",h:"50px",borderWidth:"1px",bgColor:(0,d.dU)("white","gray.900"),cursor:"col-resize",justifyContent:"center",align:"center",borderRadius:"sm",...e,children:[(0,n.jsx)(es.az,{w:"2px",bgColor:(0,d.dU)("gray.300","gray.600"),h:"70%",mr:"0.5"}),(0,n.jsx)(es.az,{w:"2px",bgColor:(0,d.dU)("gray.300","gray.600"),h:"70%"})]});var eo=s(79596),er=s(1069),el=s(49942),ea=s(20644),ei=s(15281);let ec=e=>{let{selectedRuntime:t,onSelectRuntime:s}=e;return(0,n.jsxs)(eo.W,{children:[(0,n.jsx)(er.I,{as:w.$,leftIcon:t.icon,rightIcon:(0,n.jsx)(i.D3,{}),children:(0,n.jsxs)(v.z,{justifyContent:"space-between",children:[(0,n.jsx)(M.E,{children:t.name}),"status"in t&&"string"==typeof t.status?(0,n.jsx)(el.vw,{colorScheme:"orange",children:t.status}):null]})}),(0,n.jsx)(ea.c,{w:"100px",children:R.filter(e=>e.name!==t.name).map(e=>(0,n.jsx)(ei.D,{icon:e.icon,onClick:()=>s(e),children:(0,n.jsxs)(v.z,{justifyContent:"space-between",children:[(0,n.jsx)(M.E,{children:e.name}),"status"in e&&"string"==typeof e.status?(0,n.jsx)(el.vw,{colorScheme:"orange",children:e.status}):null]})},e.name))})]})},ed="preferredRuntime",eu=e=>{var t;if(!e)return R[0];let s=localStorage.getItem(ed);return null!=(t=R.find(e=>e.name===s))?t:R[0]},ep=()=>{let{typebot:e,save:t,isSavingLoading:s}=(0,E.V)(),{t:o}=(0,k.WD)(),{setPreviewingBlock:r}=(0,a.u)(),[l,i]=(0,_.useState)(500),[c,u]=(0,_.useState)(!1),[x,h]=(0,_.useState)(0),[j,b]=(0,_.useState)(eu(null==e?void 0:e.id)),[,y]=(0,m.o)(),B=async()=>{await t(),h(e=>e+1)},R=(0,S.useDrag)(e=>{i(-e.offset[0])},{from:()=>[-l,0]});return(0,n.jsxs)(p.s,{pos:"absolute",right:"0",top:"0",h:"100%",bgColor:(0,d.dU)("white","gray.950"),borderLeftWidth:"1px",shadow:"md",borderLeftRadius:"lg",onMouseOver:()=>u(!0),onMouseLeave:()=>u(!1),p:"6",zIndex:10,style:{width:"".concat(l,"px")},children:[(0,n.jsx)(g.z,{in:c,children:(0,n.jsx)(en,{...R(),pos:"absolute",left:"-7.5px",top:"calc(50% - ".concat(I.$,"px)")})}),(0,n.jsxs)(f.T,{w:"full",spacing:4,children:[(0,n.jsxs)(v.z,{justifyContent:"space-between",w:"full",children:[(0,n.jsxs)(v.z,{children:[(0,n.jsx)(ec,{selectedRuntime:j,onSelectRuntime:e=>{b(e),localStorage.setItem(ed,e.name)}}),"Web"===j.name?(0,n.jsx)(w.$,{onClick:B,isLoading:s,variant:"ghost",children:o("preview.restartButton.label")}):null]}),(0,n.jsx)(C.J,{onClick:()=>{r(void 0),y(null)}})]}),(0,n.jsx)(et,{runtime:j.name},x)]})]})};var ex=s(86158),eh=s(85678),ej=s(96378),eb=s(63015),ey=s(38831),em=s(78334),eg=s(46370),ef=s(66737),ev=s(8972),ew=s(49224),eC=s(73925),ek=s(26739),eS=s(55800),e_=s(1293),eI=s(27474),eE=s(59391);let eB=e=>{var t;let{onClose:s}=e,{typebot:o,createVariable:r,updateVariable:l,deleteVariable:a}=(0,E.V)(),[c,h]=(0,_.useState)(500),[j,b]=(0,_.useState)(!1),[y,m]=(0,_.useState)(""),f=null==o?void 0:o.variables.filter(e=>!(0,H.hj)(y)||e.name.toLowerCase().includes(y.toLowerCase())),w=(0,S.useDrag)(e=>{h(-e.offset[0])},{from:()=>[-c,0]}),k=null!=(t=null==o?void 0:o.groups.flatMap(e=>e.blocks.filter(e=>e.type===e_.G.SET_VARIABLE||(0,eS.Ke)(e))))?t:[];return(0,n.jsxs)(p.s,{pos:"absolute",right:"0",top:"0",h:"100%",bgColor:(0,d.dU)("white","gray.950"),borderLeftWidth:"1px",shadow:"md",borderLeftRadius:"lg",onMouseOver:()=>b(!0),onMouseLeave:()=>b(!1),p:"6",style:{width:"".concat(c,"px")},children:[(0,n.jsx)(g.z,{in:j,children:(0,n.jsx)(en,{...w(),pos:"absolute",left:"-7.5px",top:"calc(50% - ".concat(I.$,"px)")})}),(0,n.jsxs)(T.B,{w:"full",spacing:"4",children:[(0,n.jsx)(C.J,{pos:"absolute",right:"1rem",top:"1rem",onClick:s}),(0,n.jsx)(eh.D,{fontSize:"md",children:"Variables"}),(0,n.jsxs)(v.z,{as:"form",onSubmit:e=>{e.preventDefault(),eE.oR.success("Variable created"),m(""),r({id:(0,ek.sX)(),isSessionVariable:!0,name:y})},children:[(0,n.jsx)(ej.p,{width:"full",placeholder:"Search or create...",value:y,onChange:e=>m(e.target.value)}),(0,n.jsx)(u.s,{in:f&&y.length>0&&!f.some(e=>e.name===y),unmountOnExit:!0,offsetY:0,offsetX:10,children:(0,n.jsx)(x.K,{icon:(0,n.jsx)(i.c1,{}),"aria-label":"Create",type:"submit",colorScheme:"orange",flexShrink:0})})]}),(0,n.jsx)(T.B,{overflowY:"auto",py:"1",children:null==f?void 0:f.map(e=>(0,n.jsx)(eR,{variable:e,onChange:t=>l(e.id,t),onDelete:()=>a(e.id),setVariableAndInputBlocks:k},e.id))})]})]})},eR=e=>{let{variable:t,onChange:s,onDelete:o,setVariableAndInputBlocks:r}=e,l=r.some(e=>{var s,n;return e.type===e_.G.SET_VARIABLE&&eI.F5.includes(null==(s=e.options)?void 0:s.type)&&(null==(n=e.options)?void 0:n.variableId)===t.id}),a=r.some(e=>{var s;return(0,eS.Ke)(e)&&(null==(s=e.options)?void 0:s.variableId)===t.id});return(0,n.jsxs)(v.z,{justifyContent:"space-between",children:[(0,n.jsxs)(eb.F,{defaultValue:t.name,onSubmit:e=>s({name:e}),minWidth:0,children:[(0,n.jsx)(ey.l,{px:"2",noOfLines:1,cursor:"text",_hover:{bg:(0,d.dU)("gray.100","gray.700")}}),(0,n.jsx)(em.j,{ml:"1",pl:"1"})]}),(0,n.jsxs)(v.z,{children:[!l&&!a&&(0,n.jsxs)(eg.A,{isLazy:!0,children:[(0,n.jsx)(ef.W,{children:(0,n.jsx)(x.K,{icon:(0,n.jsx)(i.jN,{}),"aria-label":"Settings",size:"sm"})}),(0,n.jsx)(ev.Z,{children:(0,n.jsx)(ew.h,{children:(0,n.jsx)(eC.e,{children:(0,n.jsx)(ex.R,{label:"Save in results",moreInfoContent:"Check this option if you want to save the variable value in the typebot Results table.",initialValue:!t.isSessionVariable,onCheckChange:()=>s({...t,isSessionVariable:!t.isSessionVariable})})})})})]}),(0,n.jsx)(x.K,{icon:(0,n.jsx)(i.uc,{}),onClick:o,"aria-label":"Delete",size:"sm"})]})]})};var eO=s(47827),eL=s(53295),ez=s(60945),eN=s(3888),eT=s(94581),eD=s(24688),eM=s(11390),eA=s(36948),eP=s(10548),eU=s(58255),eW=s(45273),eX=s(82626);let eV=e=>{let{type:t,onMouseDown:s,tooltip:o,isDisabled:r,children:a}=e,{draggedEventType:i}=(0,l.jh)(),[c,u]=(0,_.useState)(!1);return(0,_.useEffect)(()=>{u(i===t)},[i,t]),(0,n.jsx)(eN.m,{label:o,children:(0,n.jsx)(p.s,{pos:"relative",children:(0,n.jsx)(v.z,{borderWidth:"1px",borderColor:(0,d.dU)("gray.200","gray.800"),rounded:"lg",flex:"1",cursor:r?"not-allowed":"grab",minH:c?"42px":void 0,opacity:c||r?"0.4":"1",onMouseDown:e=>{r||s(e,t)},px:"4",py:"2",_hover:(0,d.dU)({shadow:r?void 0:"md"},{bgColor:"gray.900"}),transition:"box-shadow 200ms, background-color 200ms",children:c?null:a})})})};var eF=s(4087),eY=s(10714);let e$=e=>{let{t}=(0,k.WD)();switch(e.type){case eU.B.START:return(0,n.jsxs)(eV,{...e,tooltip:t("blocks.events.start.eventCard.tooltip"),isDisabled:!0,children:[(0,n.jsx)(eF.C,{type:e.type}),(0,n.jsx)(eY.X,{type:e.type})]});case eU.B.COMMAND:return(0,n.jsxs)(eV,{...e,tooltip:t("blocks.events.command.eventCard.tooltip"),children:[(0,n.jsx)(eF.C,{type:e.type}),(0,n.jsx)(eY.X,{type:e.type})]});case eU.B.REPLY:return(0,n.jsxs)(eV,{...e,tooltip:t("blocks.events.reply.eventCard.tooltip"),children:[(0,n.jsx)(eF.C,{type:e.type}),(0,n.jsx)(eY.X,{type:e.type})]});case eU.B.INVALID_REPLY:return(0,n.jsxs)(eV,{...e,tooltip:t("blocks.events.invalidReply.eventCard.tooltip"),children:[(0,n.jsx)(eF.C,{type:e.type}),(0,n.jsx)(eY.X,{type:e.type})]})}},eG=e=>{let{type:t,...s}=e;return(0,n.jsxs)(v.z,{borderWidth:"1px",rounded:"lg",cursor:"grabbing",w:"147px",transition:"none",pointerEvents:"none",px:"4",py:"2",borderColor:(0,d.dU)("gray.200","gray.900"),bgColor:(0,d.dU)("gray.50","gray.900"),shadow:"xl",zIndex:2,...s,children:[(0,n.jsx)(eF.C,{type:t}),(0,n.jsx)(eY.X,{type:t})]})};var eK=s(18143),eJ=s(90218);let eH=e=>{let{type:t,onMouseDown:s,tooltip:o,children:r}=e,{draggedBlockType:a}=(0,l.jh)(),[i,c]=(0,_.useState)(!1);return(0,_.useEffect)(()=>{c(a===t)},[a,t]),(0,n.jsx)(eN.m,{label:o,children:(0,n.jsx)(p.s,{pos:"relative",children:(0,n.jsx)(v.z,{borderWidth:"1px",borderColor:(0,d.dU)("gray.200","gray.900"),rounded:"lg",flex:"1",cursor:"grab",minH:i?"42px":void 0,opacity:i?"0.4":"1",onMouseDown:e=>s(e,t),bgColor:(0,d.dU)("gray.50","gray.900"),px:"4",py:"2",_hover:(0,d.dU)({shadow:"md"},{bgColor:"gray.900"}),transition:"box-shadow 200ms, background-color 200ms",children:i?null:r})})})};var eq=s(9533),eQ=s(3827),eZ=s(74279);let e0=e=>{let{blockDef:t}=(0,eZ._)({nodeType:e.type});return(0,n.jsxs)(eH,{...e,tooltip:(null==t?void 0:t.fullName)?t.fullName:void 0,children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]})};var e1=s(13808);let e5=e=>{let{t}=(0,k.WD)(),{workspace:s}=(0,eO.h)();if((0,eS.Nq)(e.type))return(0,n.jsx)(e0,{type:e.type,onMouseDown:e.onMouseDown});switch(e.type){case eD.o.EMBED:return(0,n.jsxs)(eH,{...e,tooltip:t("blocks.bubbles.embed.blockCard.tooltip"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]});case eM.iQ.FILE:return(0,n.jsxs)(eH,{...e,tooltip:t("blocks.inputs.fileUpload.blockCard.tooltip"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsxs)(v.z,{children:[(0,n.jsx)(eQ._M,{type:e.type}),(0,eJ._)(s)&&(0,n.jsx)(eK.y,{plan:e1.cw.STARTER})]})]});case e_.G.SCRIPT:return(0,n.jsxs)(eH,{...e,tooltip:t("editor.blockCard.logicBlock.tooltip.code.label"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]});case e_.G.TYPEBOT_LINK:return(0,n.jsxs)(eH,{...e,tooltip:t("editor.blockCard.logicBlock.tooltip.typebotLink.label"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]});case e_.G.JUMP:return(0,n.jsxs)(eH,{...e,tooltip:t("editor.blockCard.logicBlock.tooltip.jump.label"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]});case eA.I.GOOGLE_SHEETS:return(0,n.jsxs)(eH,{...e,tooltip:t("blocks.integrations.googleSheets.blockCard.tooltip"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]});case eA.I.GOOGLE_ANALYTICS:return(0,n.jsxs)(eH,{...e,tooltip:t("blocks.integrations.googleAnalytics.blockCard.tooltip"),children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]});default:return(0,n.jsxs)(eH,{...e,children:[(0,n.jsx)(eq.t,{type:e.type}),(0,n.jsx)(eQ._M,{type:e.type})]})}},e2=e=>{let{type:t,...s}=e;return(0,n.jsxs)(v.z,{borderWidth:"1px",rounded:"lg",cursor:"grabbing",w:"147px",transition:"none",pointerEvents:"none",px:"4",py:"2",borderColor:(0,d.dU)("gray.200","gray.900"),bgColor:(0,d.dU)("gray.50","gray.900"),shadow:"xl",zIndex:2,...s,children:[(0,n.jsx)(eq.t,{type:t}),(0,n.jsx)(eQ._M,{type:t})]})},e4=[eA.I.OPEN_AI],e9=()=>{let{t:e}=(0,k.WD)(),{setDraggedBlockType:t,draggedBlockType:s,draggedEventType:o,setDraggedEventType:r}=(0,l.jh)(),[a,c]=(0,_.useState)({x:0,y:0}),[u,h]=(0,_.useState)({x:0,y:0}),[j,b]=(0,_.useState)("false"!==localStorage.getItem(I.a)),[y,m]=(0,_.useState)("false"!==localStorage.getItem(I.a)),[f,v]=(0,_.useState)(""),w=(0,eX.YQ)(()=>m(!1),200);(0,ez.M)("mousemove",e=>{if(!s&&!o)return;let{clientX:t,clientY:n}=e;c({...a,x:t-u.x,y:n-u.y})});let C=(e,s)=>{let n=e.currentTarget.getBoundingClientRect();c({x:n.left,y:n.top}),h({x:e.clientX-n.left,y:e.clientY-n.top}),t(s)},S=(e,t)=>{let s=e.currentTarget.getBoundingClientRect();c({x:s.left,y:s.top}),h({x:e.clientX-s.left,y:e.clientY-s.top}),r(t)},E=()=>{(s||o)&&(t(void 0),r(void 0),c({x:0,y:0}))};(0,ez.M)("mouseup",E);let B=Object.values(eW.S).filter(e=>e.id.toLowerCase().includes(f.toLowerCase())||e.tags&&e.tags.some(e=>e.toLowerCase().includes(f.toLowerCase()))||e.name.toLowerCase().includes(f.toLowerCase())).map(e=>e.id),R=Object.values(eD.o).filter(t=>(0,eQ.c9)(e)[t].toLowerCase().includes(f.toLowerCase())),O=Object.values(eM.iQ).filter(t=>(0,eQ.Q9)(e)[t].toLowerCase().includes(f.toLowerCase())),L=Object.values(e_.G).filter(t=>t===e_.G.WEBHOOK?(0,H.O9)(eP._.NEXT_PUBLIC_PARTYKIT_HOST):(0,eQ.EC)(e)[t].toLowerCase().includes(f.toLowerCase())),z=Object.values(eU.B).filter(t=>(0,eY.a)(e)[t].toLowerCase().includes(f.toLowerCase())),N=Object.values(eA.I).filter(t=>(0,eQ.KD)(e)[t].toLowerCase().includes(f.toLowerCase())&&!e4.includes(t));return(0,n.jsxs)(p.s,{w:"360px",pos:"absolute",left:"0",h:"calc(100vh - ".concat(I.$,"px)"),pl:"4",py:"4",onMouseLeave:e=>{j||e.clientX<100||w()},transform:y?"translateX(0)":"translateX(-350px)",transition:"transform 350ms cubic-bezier(0.075, 0.82, 0.165, 1) 0s",children:[(0,n.jsxs)(T.B,{w:"full",rounded:"lg",borderWidth:"1px",pt:"4",pb:"10",px:"4",bgColor:(0,d.dU)("white","gray.950"),spacing:6,userSelect:"none",overflowY:"auto",children:[(0,n.jsxs)(p.s,{justifyContent:"space-between",w:"full",alignItems:"center",gap:"3",children:[(0,n.jsx)(ej.p,{placeholder:"Search",value:f,onChange:e=>{v(e.target.value)}}),(0,n.jsx)(eN.m,{label:j?e("editor.sidebarBlocks.sidebar.unlock.label"):e("editor.sidebarBlocks.sidebar.lock.label"),children:(0,n.jsx)(x.K,{icon:j?(0,n.jsx)(i.c2,{}):(0,n.jsx)(i.bj,{}),"aria-label":j?e("editor.sidebarBlocks.sidebar.icon.unlock.label"):e("editor.sidebarBlocks.sidebar.icon.lock.label"),size:"sm",onClick:()=>{try{localStorage.setItem(I.a,String(!j))}catch(e){console.error(e)}b(!j)}})})]}),(0,n.jsxs)(T.B,{children:[(0,n.jsx)(eh.D,{as:"h4",fontSize:"sm",children:e("editor.sidebarBlocks.blockType.bubbles.heading")}),(0,n.jsx)(eT.r,{columns:2,spacing:"3",children:R.map(e=>(0,n.jsx)(e5,{type:e,onMouseDown:C},e))})]}),(0,n.jsxs)(T.B,{children:[(0,n.jsx)(eh.D,{fontSize:"sm",children:e("editor.sidebarBlocks.blockType.inputs.heading")}),(0,n.jsx)(eT.r,{columns:2,spacing:"3",children:O.map(e=>(0,n.jsx)(e5,{type:e,onMouseDown:C},e))})]}),(0,n.jsxs)(T.B,{children:[(0,n.jsx)(eh.D,{fontSize:"sm",children:e("editor.sidebarBlocks.blockType.logic.heading")}),(0,n.jsx)(eT.r,{columns:2,spacing:"3",children:L.map(e=>(0,n.jsx)(e5,{type:e,onMouseDown:C},e))})]}),(0,n.jsxs)(T.B,{children:[(0,n.jsx)(eh.D,{fontSize:"sm",children:e("editor.sidebarBlocks.blockType.events.heading")}),(0,n.jsx)(eT.r,{columns:2,spacing:"3",children:z.map(e=>(0,n.jsx)(e$,{type:e,onMouseDown:S},e))})]}),(0,n.jsxs)(T.B,{children:[(0,n.jsx)(eh.D,{fontSize:"sm",children:e("editor.sidebarBlocks.blockType.integrations.heading")}),(0,n.jsx)(eT.r,{columns:2,spacing:"3",children:N.concat(B).map(e=>(0,n.jsx)(e5,{type:e,onMouseDown:C},e))})]}),s&&(0,n.jsx)(ev.Z,{children:(0,n.jsx)(e2,{type:s,onMouseUp:E,pos:"fixed",top:"0",left:"0",style:{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px) rotate(-2deg)")}})}),o&&(0,n.jsx)(ev.Z,{children:(0,n.jsx)(eG,{type:o,onMouseUp:E,pos:"fixed",top:"0",left:"0",style:{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px) rotate(-2deg)")}})})]}),(0,n.jsx)(g.z,{in:!j,unmountOnExit:!0,children:(0,n.jsx)(p.s,{pos:"absolute",h:"100%",right:"-70px",w:"450px",top:"0",justify:"flex-end",pr:"10",align:"center",onMouseEnter:()=>{w.flush(),m(!0)},zIndex:-1,children:(0,n.jsx)(p.s,{w:"5px",h:"20px",bgColor:"gray.400",rounded:"md"})})})]})};var e8=s(23065),e6=s.n(e8),e7=s(39349),e3=s(44543),te=s(15131),tt=s(12904),ts=s(32263),tn=s(67039),to=s(50427),tr=s(7959),tl=s(86747);let ta=e=>{let{isOpen:t,onClose:s}=e,{ref:o}=(0,e7.Z)();return(0,n.jsxs)(ts.aF,{isOpen:t,onClose:s,size:"2xl",children:[(0,n.jsx)(tn.m,{}),(0,n.jsxs)(to.$,{ref:o,children:[(0,n.jsx)(tr.s,{}),(0,n.jsx)(tl.c,{pt:"12",pb:"8",px:"8",children:(0,n.jsx)(tt.O,{})})]})]})},ti=e=>{let{typebot:t,currentUserMode:s}=(0,E.V)(),[o,r]=(0,_.useState)(!1),{isOpen:l,onOpen:a,onClose:c}=(0,te.j)(),{t:u}=(0,k.WD)(),[,p]=(0,m.o)();return(0,n.jsxs)(v.z,{rounded:"md",spacing:"4",...e,children:[(0,n.jsx)(x.K,{icon:(0,n.jsx)(i.Lr,{}),"aria-label":"Open variables drawer",size:"sm",shadow:"md",bgColor:(0,d.dU)("white",void 0),onClick:()=>p("variables")}),(0,n.jsxs)(eo.W,{children:[(0,n.jsx)(er.I,{as:x.K,icon:(0,n.jsx)(i.FH,{transform:"rotate(90deg)"}),isLoading:o,size:"sm",shadow:"md",bgColor:(0,d.dU)("white",void 0)}),(0,n.jsxs)(ea.c,{children:[(0,n.jsx)(ei.D,{icon:(0,n.jsx)(i.vP,{}),onClick:()=>window.open("https://docs.typebot.io/editor/graph","_blank"),children:u("editor.graph.menu.documentationItem.label")}),(0,n.jsx)(ei.D,{icon:(0,n.jsx)(i.Ze,{}),onClick:a,children:u("editor.graph.menu.editorSettingsItem.label")}),"guest"!==s?(0,n.jsx)(ei.D,{icon:(0,n.jsx)(i.s3,{}),onClick:()=>{e6()(t),r(!0);let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),s="typebot-export-".concat((0,e3.Z)(t.name,t.id),".json"),n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",s),n.click(),r(!1)},children:u("editor.graph.menu.exportFlowItem.label")}):null]}),(0,n.jsx)(e7.f,{children:(0,n.jsx)(ta,{isOpen:l,onClose:c})})]})]})},tc=e=>{let{typebotId:t}=e,{user:s}=(0,c.J)(),{workspace:o}=(0,eO.h)();return(null==s?void 0:s.email)&&o?(0,n.jsx)(v.z,{bgColor:"red.500",w:"full",zIndex:1e3,color:"white",justifyContent:"center",fontSize:"sm",textAlign:"center",py:"2",children:(0,n.jsxs)(M.E,{fontWeight:"bold",children:["Our anti-scam system flagged your typebot. It is currently being reviewed manually.",(null==o?void 0:o.plan)!==e1.cw.FREE?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"If you think that's a mistake,"," ",(0,n.jsx)(O.Y,{href:"https://typebot.co/claim-non-scam?Email=".concat(encodeURIComponent(s.email),"&typebotId=").concat(t),children:"contact us"}),"."]}):null]})}):null};var td=s(6296);let tu=()=>{let{typebot:e,currentUserMode:t}=(0,E.V)(),{workspace:s}=(0,eO.h)(),i=(0,d.dU)("radial-gradient(var(--chakra-colors-gray-300), 1px, transparent 0)","radial-gradient(#2f2f39 1px, transparent 0)"),c=(0,d.dU)("gray.100","gray.900"),u=(null==e?void 0:e.riskLevel)===100&&!(null==s?void 0:s.isVerified);return(0,n.jsxs)(z.z,{children:[(0,n.jsx)(o.G,{title:(null==e?void 0:e.name)?"".concat(e.name," | Editor"):"Editor"}),(0,n.jsxs)(p.s,{overflow:"clip",h:"100vh",flexDir:"column",id:"editor-container",children:[(0,n.jsx)(y,{type:"editor"}),u&&(0,n.jsx)(tc,{typebotId:e.id}),(0,n.jsx)(td.R,{}),(0,n.jsx)(p.s,{flex:"1",pos:"relative",overflow:"clip",h:"full",bgColor:c,backgroundImage:i,backgroundSize:"40px 40px",backgroundPosition:"-19px -19px",children:e?(0,n.jsxs)(l.Gj,{children:[(0,n.jsxs)(a.i,{isReadOnly:"read"===t||"guest"===t,children:[(0,n.jsx)(r.T,{flex:"1",typebot:e},e.id),(0,n.jsx)(ti,{pos:"absolute",right:"40px",top:"calc(20px + ".concat(u?"70px":"0px",")")}),(0,n.jsx)(tp,{})]}),"write"===t&&(0,n.jsx)(e9,{})]}):(0,n.jsx)(p.s,{justify:"center",align:"center",boxSize:"full",children:(0,n.jsx)(eL.y,{color:"gray"})})})]})]})},tp=()=>{let[e,t]=(0,m.o)();switch(e){case"preview":return(0,n.jsx)(ep,{});case"variables":return(0,n.jsx)(eB,{onClose:()=>t(null)});case null:return null}};function tx(){return(0,n.jsx)(tu,{})}},79217:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/typebots/[typebotId]/edit",function(){return s(60212)}])},79813:(e,t,s)=>{"use strict";s.d(t,{S:()=>a});var n=s(55864),o=s(55685),r=s(64660),l=s(6029);function a(e){let{status:t}=(0,n.P$)(),s=(0,n.jw)();return(0,l.jsx)(r.B.div,{"data-status":t,...e,__css:s.indicator,className:(0,o.cx)("chakra-step__indicator",e.className)})}},80636:(e,t,s)=>{"use strict";s.d(t,{W:()=>i});var n=s(6029);function o(e){return(0,n.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"1em",width:"1em",...e,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}var r=s(55864),l=s(3495),a=s(55685);function i(e){let{status:t}=(0,r.P$)(),s=(0,r.jw)();return(0,n.jsx)(l.I,{as:"complete"===t?o:void 0,__css:s.icon,...e,className:(0,a.cx)("chakra-step__icon",e.className)})}},81574:(e,t,s)=>{"use strict";s.d(t,{s:()=>u});var n=s(58671),o=s(43543),r=s(8749),l=s(20462),a=s(96529),i=s(64660),c=s(55685),d=s(6029),u=(0,r.R)((e,t)=>{var s;let r=(0,o.R)(),{onChange:u,value:p}=e,x=(0,l.o5)("Radio",{...r,...e}),{spacing:h="0.5rem",children:j,isDisabled:b=null==r?void 0:r.isDisabled,isFocusable:y=null==r?void 0:r.isFocusable,inputProps:m,...g}=(0,a.MN)(e),f=e.isChecked;(null==r?void 0:r.value)!=null&&null!=p&&(f=r.value===p);let v=u;(null==r?void 0:r.onChange)&&null!=p&&(v=(0,c.OK)(r.onChange,u));let w=null!=(s=null==e?void 0:e.name)?s:null==r?void 0:r.name,{getInputProps:C,getCheckboxProps:k,getLabelProps:S,getRootProps:_,htmlProps:I}=(0,n.z)({...g,isChecked:f,isFocusable:y,isDisabled:b,onChange:v,name:w}),[E,B]=function(e,t){let s={},n={};for(let[o,r]of Object.entries(e))t.includes(o)?s[o]=r:n[o]=r;return[s,n]}(I,a.GF),R=k(B),O=C(m,t),L=S(),z=Object.assign({},E,_()),N={display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative",...x.container},T={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,...x.control},D={userSelect:"none",marginStart:h,...x.label};return(0,d.jsxs)(i.B.label,{className:"chakra-radio",...z,__css:N,children:[(0,d.jsx)("input",{className:"chakra-radio__input",...O}),(0,d.jsx)(i.B.span,{className:"chakra-radio__control",...R,__css:T}),j&&(0,d.jsx)(i.B.span,{className:"chakra-radio__label",...L,__css:D,children:j})]})});u.displayName="Radio"},87505:(e,t,s)=>{"use strict";s.d(t,{m:()=>i});var n=s(55864),o=s(55685),r=s(8749),l=s(64660),a=s(6029),i=(0,r.R)(function(e,t){let{orientation:s,status:r,isLast:i,showLastSeparator:c}=(0,n.P$)(),d=(0,n.jw)();return i&&!c?null:(0,a.jsx)(l.B.div,{ref:t,role:"separator","data-orientation":s,"data-status":r,__css:d.separator,...e,className:(0,o.cx)("chakra-step__separator",e.className)})})},95281:(e,t,s)=>{"use strict";s.d(t,{C:()=>u});var n=s(55864),o=s(55685),r=s(8749),l=s(20462),a=s(96529),i=s(64660),c=s(55729),d=s(6029),u=(0,r.R)(function(e,t){let s=(0,l.o5)("Stepper",e),{children:r,index:u,orientation:p="horizontal",showLastSeparator:x=!1,...h}=(0,a.MN)(e),j=c.Children.toArray(r),b=j.length;return(0,d.jsx)(i.B.div,{ref:t,"aria-label":"Progress","data-orientation":p,...h,__css:s.stepper,className:(0,o.cx)("chakra-stepper",e.className),children:(0,d.jsx)(n.jf,{value:s,children:j.map((e,t)=>(0,d.jsx)(n.V$,{value:{index:t,status:t<u?"complete":t>u?"incomplete":"active",orientation:p,showLastSeparator:x,count:b,isFirst:0===t,isLast:t===b-1},children:e},t))})})})},98293:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var n=s(55864),o=s(55685),r=s(8749),l=s(64660),a=s(6029),i=(0,r.R)(function(e,t){let{orientation:s,status:r,showLastSeparator:i}=(0,n.P$)(),c=(0,n.jw)();return(0,a.jsx)(l.B.div,{ref:t,"data-status":r,"data-orientation":s,"data-stretch":(0,o.sE)(i),__css:c.step,...e,className:(0,o.cx)("chakra-step",e.className)})})},99412:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});var n=s(55864),o=s(55685),r=s(8749),l=s(64660),a=s(6029),i=(0,r.R)(function(e,t){let{children:s,...r}=e,{status:i,index:c}=(0,n.P$)(),d=(0,n.jw)();return(0,a.jsx)(l.B.div,{ref:t,"data-status":i,__css:d.number,...r,className:(0,o.cx)("chakra-step__number",e.className),children:s||c+1})})}},e=>{var t=t=>e(e.s=t);e.O(0,[7280,7096,5581,9736,7708,7431,8671,3284,3847,4857,4852,9959,7839,1644,2904,4111,636,6593,8792],()=>t(79217)),_N_E=e.O()}]);