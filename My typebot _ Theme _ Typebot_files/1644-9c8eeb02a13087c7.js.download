try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9577d674-c342-4750-8efe-949542d591a7",e._sentryDebugIdIdentifier="sentry-dbid-9577d674-c342-4750-8efe-949542d591a7")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1644],{4368:(e,t,n)=>{n.d(t,{h:()=>a,z:()=>o});var i=n(6029),s=n(55729);let l=(0,s.createContext)({}),o=e=>{let{children:t}=e,[n,o]=(0,s.useState)();return(0,i.jsx)(l.Provider,{value:{startPreviewFrom:n,setStartPreviewFrom:o},children:t})},a=()=>(0,s.useContext)(l)},6296:(e,t,n)=>{n.d(t,{R:()=>ez});var i=n(6029),s=n(46769),l=n(52799),o=n(44444),a=n(58352),r=n(46370),d=n(66737),c=n(22070),u=n(64660),p=n(8972),h=n(49224),x=n(90944),b=n(55729),m=n(81485),y=n(90184),g=n(48077),j=n(98269),v=n(47827),f=n(20873),w=n(29328),C=n(28144),S=n(96378),z=n(49377),k=n(94283),I=n(49942),D=n(94858),E=n(81251),B=n(79596),W=n(1069),T=n(20644),L=n(15281),A=n(13808),R=n(98444),$=n(2965);let N=e=>{let{typebotId:t,onError:n}=e,{data:i,error:s,mutate:l}=(0,$.Ay)(t?"/api/typebots/".concat(t,"/collaborators"):null,R.G);return s&&n(s),{collaborators:null==i?void 0:i.collaborators,isLoading:!s&&!i,mutate:l}};var _=n(10548);let O=e=>{let{typebotId:t,onError:n}=e,{data:i,error:s,mutate:l}=(0,$.Ay)(t?"/api/typebots/".concat(t,"/invitations"):null,R.G,{dedupingInterval:_._.NEXT_PUBLIC_E2E_TEST?0:void 0});return s&&n(s),{invitations:null==i?void 0:i.invitations,isLoading:!s&&!i,mutate:l}};var K=n(2283);let P=(e,t)=>(0,K.w$)({method:"DELETE",url:"/api/typebots/".concat(e,"/collaborators/").concat(t)}),q=(e,t)=>(0,K.w$)({method:"DELETE",url:"/api/typebots/".concat(e,"/invitations/").concat(t)}),V=(e,t)=>{let{email:n,type:i}=t;return(0,K.w$)({method:"POST",url:"/api/typebots/".concat(e,"/invitations"),body:{email:n,type:i}})},M=(e,t,n)=>(0,K.w$)({method:"PATCH",url:"/api/typebots/".concat(e,"/collaborators/").concat(t),body:n}),H=(e,t,n)=>(0,K.w$)({method:"PATCH",url:"/api/typebots/".concat(e,"/invitations/").concat(t),body:n});var F=n(90869),Z=n(82981);let U=e=>{let{type:t}=e;switch(t){case A.k0.READ:return(0,i.jsx)(x.T,{keyName:"collaboration.roles.view.label"});case A.k0.WRITE:return(0,i.jsx)(x.T,{keyName:"collaboration.roles.edit.label"});case A.k0.FULL_ACCESS:return(0,i.jsx)(x.T,{keyName:"collaboration.roles.full.label"})}},Y=e=>{let{email:t,name:n,image:s,type:l,isGuest:o=!1,isOwner:a,onDeleteClick:r,onChangeCollaborationType:d}=e,{t:c}=(0,x.WD)(),u=(0,F.dU)("gray.100","gray.700");return(0,i.jsxs)(B.W,{placement:"bottom-end",children:[(0,i.jsx)(W.I,{_hover:{backgroundColor:u},borderRadius:"md",children:(0,i.jsx)(Q,{email:t,name:n,image:s,isGuest:o,type:l})}),a&&(0,i.jsxs)(T.c,{shadow:"md",children:[(0,i.jsx)(L.D,{onClick:()=>d(A.k0.WRITE),children:(0,i.jsx)(U,{type:A.k0.WRITE})}),(0,i.jsx)(L.D,{onClick:()=>d(A.k0.READ),children:(0,i.jsx)(U,{type:A.k0.READ})}),(0,i.jsx)(L.D,{color:"red.500",onClick:r,children:c("remove")})]})]})},Q=e=>{let{name:t,type:n,isGuest:s=!1,image:l,email:o}=e,{t:a}=(0,x.WD)();return(0,i.jsxs)(C.z,{justifyContent:"space-between",maxW:"full",py:"2",px:"4",children:[(0,i.jsxs)(C.z,{minW:0,spacing:3,children:[(0,i.jsx)(Z.e,{name:t,src:l,size:"sm"}),(0,i.jsxs)(w.B,{spacing:0,minW:"0",children:[t&&(0,i.jsx)(k.E,{textAlign:"left",fontSize:"15px",children:t}),(0,i.jsx)(k.E,{color:"gray.500",fontSize:t?"14px":"inherit",noOfLines:1,children:o})]})]}),(0,i.jsxs)(C.z,{flexShrink:0,children:[s&&(0,i.jsx)(I.vw,{color:"gray.400",children:a("pending")}),(0,i.jsx)(I.vw,{children:(0,i.jsx)(U,{type:n})})]})]})},G=()=>{let{currentUserMode:e,workspace:t}=(0,v.h)(),{t:n}=(0,x.WD)(),{typebot:s}=(0,j.V)(),[l,o]=(0,b.useState)(A.k0.READ),[a,r]=(0,b.useState)(""),[d,u]=(0,b.useState)(!1),{collaborators:p,isLoading:h,mutate:m}=N({typebotId:null==s?void 0:s.id,onError:e=>(0,f.o)({description:e.message})}),{invitations:y,isLoading:B,mutate:W}=O({typebotId:null==s?void 0:s.id,onError:e=>(0,f.o)({context:n("share.button.popover.invitationsFetch.error.label"),description:e.message})}),T=t=>async n=>{if(!s||"guest"===e)return;let{error:i}=await H(null==s?void 0:s.id,t,{email:t,typebotId:s.id,type:n});if(i)return(0,f.o)({context:i.name,description:i.message});W({invitations:(null!=y?y:[]).map(e=>e.email===t?{...e,type:n}:e)})},L=t=>async()=>{if(!s||"guest"===e)return;let{error:n}=await q(null==s?void 0:s.id,t);if(n)return(0,f.o)({context:n.name,description:n.message});W({invitations:(null!=y?y:[]).filter(e=>e.email!==t)})},R=t=>async n=>{if(!s||"guest"===e)return;let{error:i}=await M(null==s?void 0:s.id,t,{userId:t,type:n,typebotId:s.id});if(i)return(0,f.o)({context:i.name,description:i.message});m({collaborators:(null!=p?p:[]).map(e=>e.userId===t?{...e,type:n}:e)})},$=t=>async()=>{if(!s||"guest"===e)return;let{error:n}=await P(null==s?void 0:s.id,t);if(n)return(0,f.o)({context:n.name,description:n.message});m({collaborators:(null!=p?p:[]).filter(e=>e.userId!==t)})},_=async t=>{if(t.preventDefault(),!s||"guest"===e)return;u(!0);let{error:i}=await V(s.id,{email:a,type:l});if(u(!1),W({invitations:null!=y?y:[]}),m({collaborators:null!=p?p:[]}),i)return(0,f.o)({context:i.name,description:i.message});(0,f.o)({status:"success",description:n("share.button.popover.invitationSent.successToast.label")}),r("")};return(0,i.jsxs)(w.B,{spacing:1,pt:"4",children:[(0,i.jsxs)(C.z,{as:"form",onSubmit:_,px:"4",pb:"2",children:[(0,i.jsx)(S.p,{size:"sm",placeholder:n("share.button.popover.inviteInput.placeholder"),name:"inviteEmail",value:a,onChange:e=>r(e.target.value),rounded:"md",isDisabled:"guest"===e}),"guest"!==e&&(0,i.jsx)(J,{type:l,onChange:o}),(0,i.jsx)(c.$,{size:"sm",colorScheme:"orange",isLoading:d,flexShrink:0,type:"submit",isDisabled:"guest"===e,children:n("share.button.popover.inviteButton.label")})]}),t&&(0,i.jsxs)(z.s,{py:"2",px:"4",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(C.z,{minW:0,spacing:3,children:[(0,i.jsx)(g.e,{icon:t.icon,boxSize:"32px"}),(0,i.jsxs)(k.E,{fontSize:"15px",noOfLines:1,children:["Everyone at ",t.name]})]}),(0,i.jsx)(I.vw,{flexShrink:0,children:(0,i.jsx)(U,{type:A.k0.FULL_ACCESS})})]}),null==y?void 0:y.map(t=>{let{email:n,type:s}=t;return(0,i.jsx)(Y,{email:n,type:s,isOwner:"guest"!==e,onDeleteClick:L(n),onChangeCollaborationType:T(n),isGuest:!0},n)}),null==p?void 0:p.map(t=>{var n,s,l;let{user:o,type:a,userId:r}=t;return(0,i.jsx)(Y,{email:null!=(n=o.email)?n:"",image:null!=(s=o.image)?s:void 0,name:null!=(l=o.name)?l:void 0,type:a,isOwner:"guest"!==e,onDeleteClick:$(null!=r?r:""),onChangeCollaborationType:R(r)},r)}),(h||B)&&(0,i.jsxs)(C.z,{p:"4",justifyContent:"space-between",children:[(0,i.jsxs)(C.z,{children:[(0,i.jsx)(D.Q,{boxSize:"32px"}),(0,i.jsxs)(w.B,{children:[(0,i.jsx)(E.E,{width:"130px",h:"6px"}),(0,i.jsx)(E.E,{width:"200px",h:"6px"})]})]}),(0,i.jsx)(E.E,{width:"80px",h:"10px"})]})]})},J=e=>{let{type:t,onChange:n}=e;return(0,i.jsxs)(B.W,{placement:"bottom-end",children:[(0,i.jsx)(W.I,{flexShrink:0,size:"sm",as:c.$,rightIcon:(0,i.jsx)(o.YJ,{transform:"rotate(-90deg)"}),children:(0,i.jsx)(U,{type:t})}),(0,i.jsx)(T.c,{minW:0,children:(0,i.jsxs)(w.B,{maxH:"35vh",overflowY:"auto",spacing:"0",children:[(0,i.jsx)(L.D,{onClick:()=>n(A.k0.READ),children:(0,i.jsx)(U,{type:A.k0.READ})}),(0,i.jsx)(L.D,{onClick:()=>n(A.k0.WRITE),children:(0,i.jsx)(U,{type:A.k0.WRITE})})]})})]})};var X=n(91767),ee=n(10497);let et=()=>{var e,t;let{t:n}=(0,x.WD)(),{typebot:s,updateTypebot:l}=(0,j.V)(),o="".concat(window.location.origin,"/typebots/").concat(null==s?void 0:s.id,"/edit"),a=async e=>{await l({updates:{settings:{...null==s?void 0:s.settings,publicShare:{...null==s?void 0:s.settings.publicShare,isEnabled:e}}},save:!0})};return(0,i.jsxs)(w.B,{spacing:4,children:[(0,i.jsx)(G,{}),(0,i.jsx)(w.B,{p:"4",borderTopWidth:1,children:(0,i.jsx)(y.J,{label:n("share.button.popover.publicFlow.label"),initialValue:null!=(t=null==s||null==(e=s.settings.publicShare)?void 0:e.isEnabled)&&t,onCheckChange:a,children:(0,i.jsx)(w.B,{spacing:4,children:(0,i.jsxs)(X.M,{size:"sm",children:[(0,i.jsx)(S.p,{type:"text",defaultValue:o,pr:"16"}),(0,i.jsx)(ee.t,{width:"60px",children:(0,i.jsx)(m.i,{size:"sm",textToCopy:o})})]})})})})]})},en=e=>{let{isLoading:t}=e,{t:n}=(0,x.WD)();return(0,i.jsxs)(r.A,{isLazy:!0,placement:"bottom-end",children:[(0,i.jsx)(d.W,{children:(0,i.jsx)(c.$,{isLoading:t,leftIcon:(0,i.jsx)(o.LE,{fontSize:"md"}),"aria-label":n("share.button.popover.ariaLabel"),size:"sm",iconSpacing:{base:0,xl:2},children:(0,i.jsx)(u.B.span,{display:{base:"none",xl:"inline"},children:n("share.button.label")})})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(h.h,{shadow:"md",width:"430px",rootProps:{style:{transform:"scale(0)"}},children:(0,i.jsx)(et,{})})})]})};var ei=n(77420),es=n(44811),el=n(44605),eo=n(15131),ea=n(58972),er=n(3888),ed=n(53295),ec=n(82203),eu=n.n(ec),ep=n(81278),eh=n(82626),ex=n(48874),eb=n(4368),em=n(63015),ey=n(38831),eg=n(78334);let ej=e=>{let{defaultName:t,onNewName:n}=e,{t:s}=(0,x.WD)(),l=(0,F.dU)("gray.100","gray.700"),[o,a]=(0,b.useState)(t);return(0,i.jsx)(er.m,{label:s("rename"),children:(0,i.jsxs)(em.F,{value:o,onChange:a,onSubmit:e=>{if(""===e)return a(t);e!==t&&n(e)},children:[(0,i.jsx)(ey.l,{noOfLines:2,cursor:"pointer",maxW:"150px",overflow:"hidden",fontSize:"14px",minW:"30px",minH:"20px",bgColor:""===o?l:"inherit"}),(0,i.jsx)(eg.j,{fontSize:"14px"})]})})};var ev=n(3495);let ef=e=>(0,i.jsxs)(ev.I,{viewBox:"0 0 40 48",fill:"none",...e,children:[(0,i.jsx)("path",{d:"M37.9625 4.18811C36.9719 1.73444 34.5328 0 31.6797 0H6.75937C3.02656 0 0 2.97048 0 6.63412V39.0671C0 40.9273 0.779687 42.6081 2.03594 43.8119C3.02813 46.2656 5.46875 48 8.32187 48H33.2422C36.975 48 40 45.0311 40 41.3674V8.93444C40 7.07425 39.2203 5.39195 37.9625 4.18811ZM34.5312 39.0671C34.5312 40.6098 33.2516 41.8658 31.6797 41.8658H6.75937C6.29844 41.8658 5.8625 41.7585 5.47656 41.5652C4.54531 41.1052 3.90625 40.1574 3.90625 39.0671V6.63412C3.90625 5.08984 5.18594 3.83387 6.75937 3.83387H31.6797C33.1828 3.83387 34.4188 4.98249 34.5234 6.43476C34.5281 6.5007 34.5312 6.56665 34.5312 6.63412V39.0671Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M17.7516 7.26994L15.8321 7.6084C15.3121 7.70009 14.965 8.19594 15.0566 8.71591L20.0616 37.1007C20.1533 37.6207 20.6492 37.9679 21.1691 37.8762L23.0886 37.5377C23.6086 37.446 23.9558 36.9502 23.8641 36.4302L18.8591 8.04543C18.7674 7.52545 18.2716 7.17826 17.7516 7.26994Z",fill:"currentColor"})]});var ew=n(90170),eC=n(21638);let eS=()=>{let{t:e}=(0,x.WD)(),t=(0,ep.useRouter)(),{user:n}=(0,ew.J)(),{typebot:s,save:l}=(0,j.V)(),{setStartPreviewFrom:a}=(0,eb.h)(),[r,d]=(0,el.o)(),u=async()=>{a(void 0),l().then(),d("preview")};return(0,i.jsxs)(z.s,{w:"full",borderBottomWidth:"1px",justify:"center",align:"center",h:"".concat(ex.$,"px"),zIndex:1,pos:"relative",bgColor:(0,F.dU)("white","gray.950"),flexShrink:0,children:[(0,i.jsxs)(C.z,{display:["none","flex"],pos:{base:"absolute",xl:"static"},right:{base:280,xl:0},children:[(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(null==s?void 0:s.id,"/edit"),colorScheme:t.pathname.includes("/edit")?"orange":"gray",variant:t.pathname.includes("/edit")?"outline":"ghost",size:"sm",children:e("editor.header.flowButton.label")}),(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(null==s?void 0:s.id,"/theme"),colorScheme:t.pathname.endsWith("theme")?"orange":"gray",variant:t.pathname.endsWith("theme")?"outline":"ghost",size:"sm",children:e("editor.header.themeButton.label")}),(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(null==s?void 0:s.id,"/settings"),colorScheme:t.pathname.endsWith("settings")?"orange":"gray",variant:t.pathname.endsWith("settings")?"outline":"ghost",size:"sm",children:e("editor.header.settingsButton.label")})]}),(0,i.jsx)(C.z,{pos:"absolute",left:"1rem",justify:"center",align:"center",spacing:"6",children:(0,i.jsxs)(C.z,{alignItems:"center",spacing:3,children:[s&&(0,i.jsx)(g.e,{icon:s.icon,emojiFontSize:"2xl"}),(0,i.jsx)(k.E,{noOfLines:2,maxW:"150px",overflow:"hidden",fontSize:"14px",minW:"30px",minH:"20px",children:null==s?void 0:s.name})]})}),(0,i.jsxs)(C.z,{right:"1rem",pos:"absolute",display:["none","flex"],spacing:4,children:[(0,i.jsxs)(C.z,{children:[(null==s?void 0:s.id)&&(0,i.jsx)(c.$,{as:eu(),href:n?"/typebots/".concat(s.id,"/duplicate"):{pathname:"/register",query:{redirectPath:"/typebots/".concat(s.id,"/duplicate")}},leftIcon:(0,i.jsx)(o.Td,{}),isLoading:(0,K.pN)(s),size:"sm",children:"Duplicate"}),t.pathname.includes("/edit")&&(0,K.pN)(r)&&(0,i.jsx)(c.$,{colorScheme:"orange",onClick:u,isLoading:(0,K.pN)(s),leftIcon:(0,i.jsx)(o.ud,{}),size:"sm",children:"Play bot"})]}),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eC.c,{orientation:"vertical",h:"25px",borderColor:"gray.400"}),(0,i.jsx)(c.$,{as:eu(),href:"/register",leftIcon:(0,i.jsx)(ef,{}),variant:"outline",size:"sm",children:"Try Typebot"})]})]})]})},ez=()=>{let{typebot:e,publishedTypebot:t,currentUserMode:n}=(0,j.V)(),{workspace:s}=(0,v.h)(),{isOpen:o,onOpen:a}=(0,eo.j)(),r=(0,F.dU)("white","gray.950");return"guest"===n?(0,i.jsx)(eS,{}):(0,i.jsxs)(z.s,{w:"full",borderBottomWidth:"1px",justify:"center",align:"center",h:"".concat(ex.$,"px"),pos:"relative",bgColor:r,flexShrink:0,children:[o&&(0,i.jsx)(l.q,{autoShowDelay:0}),(0,i.jsx)(ek,{pos:"absolute",left:"1rem",onHelpClick:()=>{(0,ei.I)()&&(null==s?void 0:s.plan)&&s.plan!==A.cw.FREE?a():window.open("https://docs.typebot.io/guides/how-to-get-help","_blank")}}),(0,i.jsx)(eD,{display:{base:"none",xl:"flex"},pos:{base:"absolute"},typebotId:null==e?void 0:e.id,isResultsDisplayed:(0,K.O9)(t)}),(0,i.jsx)(eI,{right:"40px",pos:"absolute",display:["none","flex"],isResultsDisplayed:(0,K.O9)(t)})]})},ek=e=>{var t,n,l,a;let{onHelpClick:r,...d}=e,{t:p}=(0,x.WD)(),h=(0,ep.useRouter)(),{typebot:m,updateTypebot:y,canUndo:g,canRedo:v,undo:f,redo:w,currentUserMode:S,isSavingLoading:z}=(0,j.V)(),[I,D]=(0,b.useState)(!1),[E,B]=(0,b.useState)(!1),W=(0,eh.YQ)(()=>{B(!1)},1e3),T=(0,eh.YQ)(()=>{D(!1)},1e3);return(0,es.K)({undo:()=>{g&&(W.flush(),B(!0),W(),f())},redo:()=>{v&&(W.flush(),D(!0),T(),w())}}),(0,i.jsxs)(C.z,{justify:"center",align:"center",spacing:"6",...d,children:[(0,i.jsxs)(C.z,{alignItems:"center",spacing:3,children:[(0,i.jsx)(ea.K,{as:eu(),"aria-label":"Navigate back",icon:(0,i.jsx)(o.YJ,{fontSize:"md"}),href:{pathname:h.query.parentId?"/typebots/[typebotId]/edit":(null==m?void 0:m.folderId)?"/typebots/folders/[id]":"/typebots",query:{id:null!=(t=null==m?void 0:m.folderId)?t:[],parentId:Array.isArray(h.query.parentId)?h.query.parentId.slice(0,-1):[],typebotId:Array.isArray(h.query.parentId)?[...h.query.parentId].pop():null!=(n=h.query.parentId)?n:[]}},size:"sm"}),(0,i.jsxs)(C.z,{spacing:1,children:[m&&(0,i.jsx)(s.a,{uploadFileProps:{workspaceId:m.workspaceId,typebotId:m.id,fileName:"icon"},icon:null==m?void 0:m.icon,onChangeIcon:e=>y({updates:{icon:e}})}),"(",(0,i.jsx)(ej,{defaultName:null!=(l=null==m?void 0:m.name)?l:"",onNewName:e=>y({updates:{name:e}})},"typebot-name-".concat(null!=(a=null==m?void 0:m.name)?a:"")),")"]}),"write"===S&&(0,i.jsxs)(C.z,{children:[(0,i.jsx)(er.m,{label:p(E?"editor.header.undo.tooltip.label":"editor.header.undoButton.label"),isOpen:!!E||void 0,hasArrow:E,children:(0,i.jsx)(ea.K,{display:["none","flex"],icon:(0,i.jsx)(o.ej,{fontSize:"16px"}),size:"sm","aria-label":p("editor.header.undoButton.label"),onClick:f,isDisabled:!g})}),(0,i.jsx)(er.m,{label:p(I?"editor.header.undo.tooltip.label":"editor.header.redoButton.label"),isOpen:!!I||void 0,hasArrow:I,children:(0,i.jsx)(ea.K,{display:["none","flex"],icon:(0,i.jsx)(o.Uf,{fontSize:"16px"}),size:"sm","aria-label":p("editor.header.redoButton.label"),onClick:w,isDisabled:!v})})]}),(0,i.jsx)(c.$,{leftIcon:(0,i.jsx)(o.Xb,{}),onClick:r,size:"sm",iconSpacing:{base:0,xl:2},children:(0,i.jsx)(u.B.span,{display:{base:"none",xl:"inline"},children:p("editor.header.helpButton.label")})})]}),z&&(0,i.jsxs)(C.z,{children:[(0,i.jsx)(ed.y,{speed:"0.7s",size:"sm",color:"gray.400"}),(0,i.jsx)(k.E,{fontSize:"sm",color:"gray.400",children:p("editor.header.savingSpinner.label")})]})]})},eI=e=>{let{isResultsDisplayed:t,...n}=e,s=(0,ep.useRouter)(),{t:l}=(0,x.WD)(),{typebot:r,currentUserMode:d,save:p,isSavingLoading:h}=(0,j.V)(),{setStartPreviewFrom:b}=(0,eb.h)(),[m,y]=(0,el.o)(),g=async()=>{b(void 0),await p(),y("preview")};return(0,i.jsxs)(C.z,{...n,children:[(0,i.jsx)(eD,{display:{base:"none",md:"flex",xl:"none"},typebotId:null==r?void 0:r.id,isResultsDisplayed:t}),(0,i.jsx)(z.s,{pos:"relative",children:(0,i.jsx)(en,{isLoading:(0,K.pN)(r)})}),s.pathname.includes("/edit")&&"preview"!==m&&(0,i.jsx)(c.$,{colorScheme:"gray",onClick:g,isLoading:(0,K.pN)(r)||h,leftIcon:(0,i.jsx)(o.ud,{}),size:"sm",iconSpacing:{base:0,xl:2},children:(0,i.jsx)(u.B.span,{display:{base:"none",xl:"inline"},children:l("editor.header.previewButton.label")})}),"guest"===d&&(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(null==r?void 0:r.id,"/duplicate"),leftIcon:(0,i.jsx)(o.Td,{}),isLoading:(0,K.pN)(r),size:"sm",children:"Duplicate"}),"write"===d&&(0,i.jsx)(a.I,{size:"sm"})]})},eD=e=>{let{typebotId:t,isResultsDisplayed:n,...s}=e,{t:l}=(0,x.WD)(),o=(0,ep.useRouter)();return(0,i.jsxs)(C.z,{...s,children:[(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(t,"/edit"),colorScheme:o.pathname.includes("/edit")?"orange":"gray",variant:o.pathname.includes("/edit")?"outline":"ghost",size:"sm",children:l("editor.header.flowButton.label")}),(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(t,"/theme"),colorScheme:o.pathname.endsWith("theme")?"orange":"gray",variant:o.pathname.endsWith("theme")?"outline":"ghost",size:"sm",children:l("editor.header.themeButton.label")}),(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(t,"/settings"),colorScheme:o.pathname.endsWith("settings")?"orange":"gray",variant:o.pathname.endsWith("settings")?"outline":"ghost",size:"sm",children:l("editor.header.settingsButton.label")}),(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(t,"/share"),colorScheme:o.pathname.endsWith("share")?"orange":"gray",variant:o.pathname.endsWith("share")?"outline":"ghost",size:"sm",children:l("share.button.label")}),n&&(0,i.jsx)(c.$,{as:eu(),href:"/typebots/".concat(t,"/results"),colorScheme:o.pathname.includes("results")?"orange":"gray",variant:o.pathname.includes("results")?"outline":"ghost",size:"sm",children:l("editor.header.resultsButton.label")})]})}},44543:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(2283);let s=e=>{let t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return t?t.filter(i.hj).map(e=>e.toLowerCase()).join("-"):""},l=(e,t)=>{let n=s(e);return"".concat(""!==n?"".concat(n,"-"):"").concat(null==t?void 0:t.slice(-7))}},44605:(e,t,n)=>{n.d(t,{o:()=>l});var i=n(37016);let s=["preview","variables"],l=()=>(0,i.ZA)("rightPanel",(0,i.M1)(s))},44811:(e,t,n)=>{n.d(t,{K:()=>l});var i=n(2283),s=n(55729);let l=e=>{let{undo:t,redo:n,copy:l,paste:a,cut:r,duplicate:d,backspace:c,selectAll:u}=e,p=e=>o("z",{event:e})&&!e.shiftKey,h=e=>o("z",{event:e})&&e.shiftKey,x=e=>o("c",{event:e}),b=e=>o("v",{event:e}),m=e=>o("x",{event:e}),y=e=>o("d",{event:e}),g=e=>o("a",{event:e}),j=e=>"Backspace"===e.key,v=(0,s.useCallback)(e=>{var s;if(!e.metaKey&&!e.ctrlKey&&"Backspace"!==e.key)return;let o=null==(s=window.getSelection())?void 0:s.toString();if((0,i.hj)(o))return;let v=e.target;if(!((null==v?void 0:v.role)==="textbox"||v instanceof HTMLTextAreaElement||v instanceof HTMLInputElement)&&(null==v?void 0:v.tagName)!=="TYPEBOT-STANDARD"&&(null==v?void 0:v.tagName)!=="TYPEBOT-BUBBLE"){if(t&&p(e)){e.preventDefault(),t();return}if(n&&h(e)){e.preventDefault(),n();return}if(l&&x(e)){e.preventDefault(),l();return}if(a&&b(e)){e.preventDefault(),a();return}if(r&&m(e)){e.preventDefault(),r();return}if(d&&y(e)){e.preventDefault(),d();return}if(c&&j(e)){e.preventDefault(),c();return}if(u&&g(e)){e.preventDefault(),u();return}}},[t,n,l,a,r,d,c,u]);(0,s.useEffect)(()=>(window.addEventListener("keydown",v),()=>{window.removeEventListener("keydown",v)}),[v])},o=(e,t)=>{let{event:n}=t;return(n.metaKey||n.ctrlKey)&&n.key===e}},48874:(e,t,n)=>{n.d(t,{$:()=>i,a:()=>s});let i=56,s="isLeftSidebarLocked"},58352:(e,t,n)=>{n.d(t,{I:()=>W});var i=n(6029),s=n(27501),l=n(37191),o=n(44444),a=n(996),r=n(90218),d=n(98269),c=n(47827),u=n(90944);let p=e=>{let{t}=(0,u.WD)();if(!e)return;let n=Math.floor((new Date().getTime()-new Date(e).getTime())/1e3),i=n/31536e3;return t(i>1?"timeSince.years":(i=n/2592e3)>1?"timeSince.months":(i=n/86400)>1?"timeSince.days":(i=n/3600)>1?"timeSince.hours":(i=n/60)>1?"timeSince.minutes":"timeSince.seconds",{count:Math.floor(i)})};var h=n(59309),x=n(20873),b=n(15131),m=n(28144),y=n(29328),g=n(94283),j=n(3888),v=n(22070),f=n(79596),w=n(1069),C=n(58972),S=n(20644),z=n(15281),k=n(16932),I=n(11390),D=n(2283),E=n(81278),B=n(44543);let W=e=>{let{isMoreMenuDisabled:t=!1,...n}=e,{t:W}=(0,u.WD)(),{workspace:T}=(0,c.h)(),{push:L,query:A,pathname:R}=(0,E.useRouter)(),{isOpen:$,onOpen:N,onClose:_}=(0,b.j)(),{isOpen:O,onOpen:K,onClose:P}=(0,b.j)(),{isPublished:q,publishedTypebot:V,restorePublishedTypebot:M,typebot:H,isSavingLoading:F,updateTypebot:Z,save:U,publishedTypebotVersion:Y,currentUserMode:Q}=(0,d.V)(),G=p(null==V?void 0:V.updatedAt.toString()),{mutate:J,status:X}=(0,k.n)(h.id.typebot.publishTypebot.mutationOptions({onError:e=>{var t;(0,x.o)({context:W("publish.error.label"),description:e.message}),(null==(t=e.data)?void 0:t.httpStatus)===403&&setTimeout(()=>{window.location.reload()},3e3)},onSuccess:()=>{(null==H?void 0:H.id)&&"guest"!==Q&&(h.qQ.invalidateQueries({queryKey:h.id.typebot.getPublishedTypebot.queryKey()}),V||R.endsWith("share")||L("/typebots/".concat(A.typebotId,"/share")))}})),{mutate:ee,status:et}=(0,k.n)(h.id.typebot.unpublishTypebot.mutationOptions({onError:e=>(0,x.o)({context:W("editor.header.unpublishTypebot.error.label"),description:e.message}),onSuccess:()=>{h.qQ.invalidateQueries({queryKey:h.id.typebot.getPublishedTypebot.queryKey()})}})),en=null==H?void 0:H.groups.flatMap(e=>e.blocks).some(e=>e.type===I.iQ.FILE),ei=async()=>{if(null==H?void 0:H.id){if((0,r._)(T)&&en)return N();await U(!H.publicId?{publicId:(0,B.Z)(H.name,H.id)}:void 0,!0),J({typebotId:H.id})}},es=async()=>{(null==H?void 0:H.id)&&(H.isClosed&&await Z({updates:{isClosed:!1},save:!0}),ee({typebotId:null==H?void 0:H.id}))},el=async()=>{await Z({updates:{isClosed:!0},save:!0})},eo=async()=>{await Z({updates:{isClosed:!1},save:!0})};return(0,i.jsxs)(m.z,{spacing:"1px",children:[(0,i.jsx)(a.L,{isOpen:$,onClose:_,type:W("billing.limitMessage.fileInput")}),V&&Y!==(null==H?void 0:H.version)&&(0,i.jsx)(s.u,{isOpen:O,onConfirm:ei,onClose:P,confirmButtonColor:"blue",title:W("publish.versionWarning.title.label"),message:(0,i.jsxs)(y.B,{spacing:"3",children:[(0,i.jsx)(g.E,{children:W("publish.versionWarning.message.aboutToDeploy.label")}),(0,i.jsx)(g.E,{fontWeight:"bold",children:(0,i.jsx)(u.T,{keyName:"publish.versionWarning.checkBreakingChanges",params:{link:(0,i.jsx)(l.Y,{href:"https://docs.typebot.io/breaking-changes#typebot-v6",isExternal:!0})}})}),(0,i.jsx)(g.E,{children:W("publish.versionWarning.message.testInPreviewMode.label")})]}),confirmButtonLabel:W("publishButton.label")}),(0,i.jsx)(j.m,{placement:"bottom-end",label:(0,i.jsxs)(y.B,{children:[(0,i.jsx)(g.E,{children:W("publishButton.tooltip.nonPublishedChanges.label")}),G?(0,i.jsx)(g.E,{fontStyle:"italic",children:(0,i.jsx)(u.T,{keyName:"publishButton.tooltip.publishedVersion.from.label",params:{timeSince:G}})}):null]}),isDisabled:(0,D.pN)(V)||q,children:(0,i.jsx)(v.$,{colorScheme:"orange",isLoading:"pending"===X||"pending"===et,isDisabled:q||F,onClick:()=>{V&&Y!==(null==H?void 0:H.version)?K():ei()},borderRightRadius:V&&!t?0:void 0,...n,children:q?(null==H?void 0:H.isClosed)?W("publishButton.closed.label"):W("publishButton.published.label"):W("publishButton.label")})}),!t&&V&&(0,i.jsxs)(f.W,{isLazy:!0,children:[(0,i.jsx)(w.I,{as:C.K,colorScheme:"orange",borderLeftRadius:0,icon:(0,i.jsx)(o.YJ,{transform:"rotate(-90deg)"}),"aria-label":W("publishButton.dropdown.showMenu.label"),size:"sm",isDisabled:"pending"===X||F}),(0,i.jsxs)(S.c,{children:[!q&&(0,i.jsx)(z.D,{onClick:M,children:W("publishButton.dropdown.restoreVersion.label")}),(null==H?void 0:H.isClosed)?(0,i.jsx)(z.D,{onClick:eo,icon:(0,i.jsx)(o.bj,{}),children:W("publishButton.dropdown.reopen.label")}):(0,i.jsx)(z.D,{onClick:el,icon:(0,i.jsx)(o.c2,{}),children:W("publishButton.dropdown.close.label")}),(0,i.jsx)(z.D,{onClick:es,icon:(0,i.jsx)(o.av,{}),children:W("publishButton.dropdown.unpublish.label")})]})]})]})}},90218:(e,t,n)=>{n.d(t,{_:()=>l});var i=n(2283),s=n(13808);let l=e=>(0,i.pN)(e)||(null==e?void 0:e.plan)===s.cw.FREE},98965:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(6029);n(10548);var s=n(95669),l=n.n(s);let o=()=>window.location.origin,a=e=>{let{title:t,description:n="Create and publish conversational forms that collect 4 times more answers and feel native to your product",imagePreviewUrl:s="".concat(o(),"/images/og.png")}=e,a="".concat(t," | Typebot");return(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:a}),(0,i.jsx)("meta",{name:"title",content:t}),(0,i.jsx)("meta",{property:"og:title",content:t}),(0,i.jsx)("meta",{property:"twitter:title",content:t}),(0,i.jsx)("meta",{name:"description",content:n}),(0,i.jsx)("meta",{property:"twitter:description",content:n}),(0,i.jsx)("meta",{property:"og:description",content:n}),(0,i.jsx)("meta",{property:"og:image",content:s}),(0,i.jsx)("meta",{property:"twitter:image",content:s}),(0,i.jsx)("meta",{property:"og:type",content:"website"}),(0,i.jsx)("meta",{property:"twitter:card",content:"summary_large_image"})]})}}}]);